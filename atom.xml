<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Fantasy Blog]]></title>
  <link href="http://tjfantasy.github.com/atom.xml" rel="self"/>
  <link href="http://tjfantasy.github.com/"/>
  <updated>2012-07-23T22:50:43+08:00</updated>
  <id>http://tjfantasy.github.com/</id>
  <author>
    <name><![CDATA[fantasy]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[ajaxForm文件上传的BUG]]></title>
    <link href="http://tjfantasy.github.com/blog/2012/06/26/jquery-ajaxform-1/"/>
    <updated>2012-06-26T18:25:00+08:00</updated>
    <id>http://tjfantasy.github.com/blog/2012/06/26/jquery-ajaxform-1</id>
    <content type="html"><![CDATA[<p><span style="display:block;text-indent:2em;">
今天在重构代码时，发现一个BUG，使用ajaxForm提交表单上传文件后服务器端的json数据无法解析到，在FireFox下弹出来个窗口提示我返回json数据要不要打开,别的浏览器没有这情况.<br/>
</span><br/>
<span style="display:block;text-indent:2em;">
原来使用ajaxForm,必须以html格式返回json数据. 也就是 response.setContentType(&#8220;text/html; charset=utf-8&#8221;); 这样返回的数据才能被设置到回调函数里面. 而且貌似格式必须是 &#8220;key&#8221;:&#8221;value&#8221; 也就是双引号,单引号还不行。
</span><br/>
<span style="display:block;text-indent:2em;">
所以直接在SuccessFailView直接扩展增加
</span>
<span style="display:block;text-indent:2em;"></p>

<pre><code>private String returnType = "json"; //返回类型
</code></pre>

<p></span>
<span style="display:block;text-indent:2em;">
在返回前台时按照不同的类型返回
</span></p>

<pre><code>JSONObject jsonObject = new JSONObject();
jsonObject.put("result", result);
if(id !=null){
    jsonObject.put("id", id);
}
if(message != null) {
    jsonObject.put("message", message);
}
response.setContentType("text/"+returnType+";charset=UTF-8");
response.getWriter().write(jsonObject.toString());
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ralasafe重构和改造之路]]></title>
    <link href="http://tjfantasy.github.com/blog/2012/06/25/ralasa-1/"/>
    <updated>2012-06-25T10:01:00+08:00</updated>
    <id>http://tjfantasy.github.com/blog/2012/06/25/ralasa-1</id>
    <content type="html"><![CDATA[<p><span style="display:block;text-indent:2em;">
开始了解Ralasafe是一个很偶然的机会，由于数据权限的解决方案对于我们团队一直是个空白，因为项目需求的缘故，不得不对于数据权限这块的空白给填充上，所以开始了解各种各样的解决方案，有的是基于AOP实现的，有的是基于SpringSecurity的ACL实现的，有的是基于商业产品实现的，直到发现了Ralasafe，一个开源访问控制中间件， 直觉告诉我这个就是我的解决方案了。
</span><br/>
<span style="display:block;text-indent:2em;">
从最初一个普通不能再普通的初级用户,到最后参与到修改BUG，发布Oracle版本的过程中，结交了很多人，比如：Ralasafe作者汪金宝，其中贡献者宋子龙。也在这个过程中对于国产开源软件有了一个翻天覆地的认识，一直把国产开源软件和质量差划等号，认为国产的开源很难真正用到实际项目中。而今天已经把开源用到了我们的实际项目中，并且通过我们的成功案例，其他的项目组，也打算在下个项目中使用。在我们的生活中，唯一不变的就是变化，也许Ralasafe是一个令我改变的诱因。
</span><br/>
<span style="display:block;text-indent:2em;">
Ralasafe掌管了项目中的数据权限部分，由于它是基于JDBC实现的，所以还帮助我们在Hibernate之外，另外一种查询的方式，因为对于大数据量，高并发系统中，Hibernate生成的SQL效率特别低，所以不得不借助于原生SQL实现，又一次发挥Ralasafe功力的时刻。我们不可否认Ralasafe为我们项目开发和今天需求变更带来了极大的帮助，但是它也有一些不尽人情的地方。
</span></p>

<blockquote><ol>
<li>对于项目侵染性太大，必须要在项目中引入大量的Ralasafe文件。</li>
<li>当配置的查询和权限信息很多时，在配置过程中会很繁琐。</li>
<li>配置信息一部分存放在数据库，一部分存放在文件里，维护起来麻烦，导致团队开发时，会带来很多麻烦的问题。</li>
<li>由于大量使用反射，因此查询效率不高。</li>
<li>由于在查询过程中，有可能会涉及到缓存，对于缓存目前没有解决方案。
。。。。。。。。。。。。</li>
</ol>
</blockquote>

<p><span style="display:block;text-indent:2em;">
以上这些问题都是我们在项目中遇到的，我认为Ralasafe其实可以做的更好，可以与我们的项目更好的无缝集成，更好让开发人员配置所需的权限。据我了解到的信息，Ralasafe有可能1.2版本会成为它的最后的版本，我能够理解在中国全职做开源事业的艰难和无奈。我打算带领一些热爱技术和开源的人，开启Ralsafe的重构和改造的道路，不仅为了自己在开发项目时带来便利，而且提供一种更好和得到大家认可的数据解决方案，让更多人知道，更多人使用。
</span> <br/>
<span style="display:block;text-indent:2em;">
目前初步设想，把Ralasafe从项目中提出来，原本Ralasafe就是一个中间件，不能跟框架似的，跟项目耦合太高，通过Rest服务,在项目中调用服务获得需要的权限信息；目前Ralasafe只能管理一个系统，但是它最初的理念是建成一个权限管理平台，同时管理多个系统，我希望能在这次改造中把该功能实现。
</span><br/>
<span style="display:block;text-indent:2em;">
无论是出于个人对Ralasafe的感情，还是出于其它的目的，我希望Ralasafe能继续延续它的辉煌。
</span></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[技术沙龙6月－“仲夏端阳”(已结束)]]></title>
    <link href="http://tjfantasy.github.com/blog/2012/06/21/salon-june/"/>
    <updated>2012-06-21T00:49:00+08:00</updated>
    <id>http://tjfantasy.github.com/blog/2012/06/21/salon-june</id>
    <content type="html"><![CDATA[<blockquote><p>端午临中夏，时清日复长。
盐梅已佐鼎，曲糵且传觞。</p>

<p>事古人留迹，年深缕积长。
当轩知槿茂，向水觉芦香。</p>

<p>亿兆同归寿，群公共保昌。
忠贞如不替，贻厥后昆芳。</p></blockquote>

<p style="text-align:right">源自  李隆基的《端午》
</p>


<h2>活动时间</h2>

<p>2012.06.15 周五 14:00 ~ 17：30</p>

<h2>活动地点</h2>

<p>方兴大厦9层会议室</p>

<h2>活动费用</h2>

<p>我们为参与者免费提供各种饮料、甜品、水果等</p>

<h2>招募话题</h2>

<p> “众”人的事业需要每个人的参与，我们为大家提供开放的自由话题讨论机会，有话题分享或发起讨论意愿的朋友可以在活动开始之前将PPT或者话题、讨论内容提交通过邮件发给（zhanghao@mail.taiji.com.cn）</p>

<h2>本次活动已经提交的话题</h2>

<ul>
<li>JS重构  主讲人：边迪</li>
<li>分享社区活动感受  主讲人：张昊</li>
<li>中石油架构分享  主讲人：刘贯良</li>
<li>ESB解决方案  主讲人：张昊</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[技术沙龙5月－“日志前世今生“(已结束)]]></title>
    <link href="http://tjfantasy.github.com/blog/2012/06/20/salon-may/"/>
    <updated>2012-06-20T00:50:00+08:00</updated>
    <id>http://tjfantasy.github.com/blog/2012/06/20/salon-may</id>
    <content type="html"><![CDATA[<h2>活动时间</h2>

<p>2012.05.18 周五 14:00 ~ 17：30</p>

<h2>活动地点</h2>

<p>407办公室</p>

<h2>活动费用</h2>

<p>我们为参与者免费提供各种饮料、甜品、水果等</p>

<h2>本次活动已经提交的话题</h2>

<ol>
<li>你还在用System.out.println()调试程序吗？说明你<span style="font-weight: bold;color:red;font-size:18px">out</span>了！</li>
<li>你有没有想过我们为什么要在系统里纪录日志，它给我们带来了什么？</li>
<li>你有没有听说过slf4j,Logback,Log4J?知道它们的前世今生吗？</li>
<li>你有没有在使用Log4J中，有没有为代码繁琐和效率的问题而发愁呢？</li>
<li>你有没有想更深入了解它们该怎样使用，他们的工作原理到底是怎么样的呢？</li>
</ol>

]]></content>
  </entry>
  
</feed>
